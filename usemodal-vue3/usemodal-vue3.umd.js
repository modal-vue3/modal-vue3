(function(o,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(o=typeof globalThis<"u"?globalThis:o||self,t(o["usemodal-vue3"]={},o.Vue))})(this,function(o,t){"use strict";const d=t.reactive({}),a={currOrder:0,triggerTotal:0,list:[],track(e){this.list.push(e)},trigger(e,l){if(this.triggerTotal++,this.list=this.list.map(i=>(i.name===e&&(i.visible=l),i)),this.triggerTotal>=this.list.length)if(this.currOrder<this.list.length){for(;this.currOrder<this.list.length&&(d[this.list[this.currOrder].name]=this.list[this.currOrder].visible,!this.list[this.currOrder].visible);)this.currOrder++;this.currOrder=0}else this.triggerTotal=0,this.trigger(e,l)}};function m(e){if(e){a.list=[];for(let l in e){let i={name:l,order:Number(e[l])};a.track(i)}a.list.sort((l,i)=>l.order-i.order)}return function(l,i){return a.trigger(l,i),d}}let u=null,f=null,s=t.ref(.6);function b(e){let l=null;if(e.value>=1)return!1;clearTimeout(l),l=setTimeout(()=>{e.value+=.02},6)}const y=t.defineComponent({props:{mask:Boolean,visible:[Object,Boolean],name:String,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},type:{type:String,default:""},draggable:{type:Boolean,default:!1},modalClass:{type:String,default:"modal-vue3-wrap"},width:{type:[String,Number],default:500},offsetTop:{type:[String,Number],default:100},zIndex:{type:[String,Number],default:1e3},title:{type:String,default:"Title"},animation:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},cancelButton:{type:Object,default:()=>({text:"cancel",onclick:null})},okButton:{type:Object,default:()=>({text:"ok",onclick:null})}},setup(e,{slots:l,emit:i}){const n=e.name,x=typeof e.width=="string"?e.width:`${e.width}px`,k=typeof e.offsetTop=="string"?e.offsetTop:`${e.offsetTop}px`,h=t.ref(null);return()=>{if(l.default){let g=n?e.visible[n]:e.visible;g?(e.animation===!1?s.value=1:(u!=n&&(u=n,s.value=.6),b(s)),s.value>=1&&(f=n,i("onVisible"))):(f==n||!n)&&i("onUnVisible");const p=r=>{!e.maskClosable||r.target===h.value&&c(n)},c=r=>{r&&a.list.length>0?a.trigger(r,!1):i("update:visible",!1)};return g?t.h("div",{class:e.modalClass},[e.mask?t.h("div",{class:"modal-vue3-mask",style:"width:100%;height:100%;position:fixed;left:0;top:0;background-color:rgba(0, 0, 0, 0.25)"}):null,t.h("div",{ref:h,style:`position:fixed;left:0;right:0;top:0;bottom:0;margin: 0 auto;z-index:${e.zIndex};overflow:auto;outline:0;`,onclick:r=>{p(r)}},[t.h("div",{class:"modal-vue3-content",style:`width:${x};position:relative;top:${k}; ${e.type!="clean"?"border:1px solid #f0f0f0;":""}margin: 0 auto;overflow:auto;outline:0;box-sizing:border-box; ${e.type!="clean"?"background-color:#fff;":""}border-radius:2px;transform:scale(${s.value});`},[e.type!="clean"?t.h("div",{class:"modal-vue3-header",style:"padding: 12px 22px;border-bottom:1px solid #f0f0f0;position:relative;"},[t.h("div",null,e.title),e.closable?t.h("div",{style:"width:20px;height:16px;display:flex;justify-content:center;align-items:center;cursor:pointer;position:absolute;top:15px;right:15px;font-size: 20px;",onclick:()=>{c(n)}},"x"):null]):null,t.h("div",{class:"modal-vue3-body",style:e.type!="clean"?"padding: 14px 22px":""},l.default()),e.type!="clean"?t.h("div",{class:"modal-vue3-footer",style:"padding: 12px 22px;display:flex;justify-content:flex-end;align-items:center;border-top:1px solid #f0f0f0;"},[t.h("div",{class:"modal-vue3-footer-cancel",style:"margin-right: 20px;width:60px;height:30px;border-radius:2px;border: 1px solid #d9d9d9;display:flex;justify-content:center;align-items:center;cursor:pointer;",onclick:e.cancelButton.onclick&&typeof e.cancelButton.onclick=="function"?e.cancelButton.onclick:()=>{c(n)}},e.cancelButton.text||"cancel"),t.h("div",{class:"modal-vue3-footer-ok",style:"width:60px;height:30px;border-radius:2px;display:flex;justify-content:center;align-items:center;background-color:#4395ff;color:#fff;cursor:pointer;",onclick:e.okButton.onclick&&typeof e.okButton.onclick=="function"?e.okButton.onclick:()=>{c(n)}},e.okButton.text||"ok")]):null])])]):null}}}});o.Modal=y,o.useModal=m,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
